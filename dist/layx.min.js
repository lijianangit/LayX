!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.layx=e():t.layx=e()}(window,function(){return(n={},r.m=i=[function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(Object.defineProperty(r,"instance",{get:function(){var t=top,e="_stateStore_";return t[e]||(t[e]=new r),t[e]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex++},enumerable:!0,configurable:!0}),r);function r(){this.prefix="layx-",this.components={},this._zIndex=1e7}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(9),r=i(2);function o(t){return n.isStringAndNotEmptyOrNull(t)?t:r.assertString(t)}e.stringCast=o,e.stringOrUndefinedCast=function(t){return void 0===t?t:o(t)},e.numberOrUndefinedCast=function(t){return void 0===t?t:"number"==typeof t?t:/^(([1-9][0-9]*(\.\d{1,2})?)|(0\.\d{1,2}))$/.test(t)?Number(t):r.assertNumber(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assertString=function(t){throw new Error("Not an empty string.")},e.assertNumber=function(t){throw new Error("Not a valid number.")},e.assertNever=function(t){throw new Error("Unexpected object: "+t)}},function(t,e,i){"use strict";function r(t,n,r){void 0===r&&(r="layx-");for(var e=[],i=3;i<arguments.length;i++)e[i-3]=arguments[i];if(!t)return null;var o=t.className.split(/\s+/g);return e.forEach(function(t){if(t){var e="";e=0===t.indexOf("!")?t.substr(1):r+t;var i=o.indexOf(e);n(o,i,e)}}),t.className=o.join(" ").trim(),t}Object.defineProperty(e,"__esModule",{value:!0}),e.removeElement=function(t){t&&t.parentElement&&t.parentElement.removeChild(t)},e.createFragment=function(){return document.createDocumentFragment()},e.createElement=function(t){return document.createElement(t)},e.createElementNS=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},e.addStyles=function(t,e){if(!t)return null;for(var i in e)e[i]&&(t.style[i]=e[i]);return t},e.updateClasses=r,e.addClasses=function(t,e){void 0===e&&(e="layx-");for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return t?r.apply(void 0,[t,function(t,e,i){~e||t.push(i)},e].concat(i)):null},e.removeClasses=function(t,e){void 0===e&&(e="layx-");for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return t?r.apply(void 0,[t,function(t,e){~e&&t.splice(e,1)},e].concat(i)):null},e.hasClass=function(t,e,i){if(void 0===e&&(e="layx-"),!t)return!1;var n=t.className.split(/\s+/g),r="";return r=0===i.indexOf("!")?i.substr(1):e+i,!!~n.indexOf(r)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(5);function o(t){}i(11),e.default=(o.v="4.0.0",o.stateStore=n.default.instance,o.test=function(){var t=new r.default;t.width=800,t.height=600,t.border="1px solid #3baced",t.shadow="rgba(0, 0, 0, 0.3) 1px 1px 24px",t.borderRadius=4,t.animate="zoom";var e=t.createView();return document.body.appendChild(e),e},o)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(6),a=i(3),h=i(1),d=i(10),u=i(0),f=(o=s.default,r(c,o),Object.defineProperty(c.prototype,"width",{get:function(){return this._width},set:function(t){this._width=h.numberOrUndefinedCast(t);var e=this.handlerWidthOrHeight("width");e&&(this._width=e,this.updateOffset({width:e}))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"height",{get:function(){return this._height},set:function(t){this._height=h.numberOrUndefinedCast(t);var e=this.handlerWidthOrHeight("height");e&&(this._height=e,this.updateOffset({height:e}))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=h.numberOrUndefinedCast(t),this._maxWidth&&this.width&&this.width>this._maxWidth&&(this.width=this._maxWidth,this.updateOffset({width:this._maxWidth}))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){this._maxHeight=h.numberOrUndefinedCast(t),this._maxHeight&&this.height&&this.height>this._maxHeight&&(this.height=this._maxHeight,this.updateOffset({height:this._maxHeight}))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=h.numberOrUndefinedCast(t),this._minWidth&&this.width&&this.width<this._minWidth&&(this.width=this._minWidth,this.updateOffset({width:this._minWidth}))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight=h.numberOrUndefinedCast(t),this._minHeight&&this.height&&this.height<this._minHeight&&(this.height=this.minHeight,this.updateOffset({height:this.minHeight}))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"left",{get:function(){return this._left},set:function(t){this._left=h.numberOrUndefinedCast(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"top",{get:function(){return this._top},set:function(t){this._top=h.numberOrUndefinedCast(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"background",{get:function(){return this._background},set:function(t){this._background=!1===t?void 0:h.stringOrUndefinedCast(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"shadow",{get:function(){return this._shadow},set:function(t){this._shadow=!1===t?void 0:h.stringOrUndefinedCast(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"border",{get:function(){return this._border},set:function(t){this._border=!1===t?void 0:h.stringOrUndefinedCast(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(t){this._borderRadius=h.numberOrUndefinedCast(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"animate",{get:function(){return this._animate},set:function(t){!1!==t&&void 0!==t||(this._animate="none"),d.isAnimateType(t)&&(this._animate=t),"none"!==this._animate&&(this.animatable=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"mode",{get:function(){return this._mode},set:function(t){void 0===t&&(this._mode="float"),d.isPresentMode(t)&&(this._mode=t)},enumerable:!0,configurable:!0}),c.prototype.createView=function(t){var e=u.default.instance,i=a.createElement("div");return i.setAttribute("data-id",this.uniqueId),i.setAttribute("data-type",this.type),a.addClasses(i,e.prefix,"block",this.animatable?"animate":void 0,this.animatable?"animate-"+this.animate+"-to-in":void 0,"mode-"+this.mode),a.addStyles(i,{width:this.width?this.width+"px":void 0,height:this.height?this.height+"px":void 0,maxWidth:this.maxWidth?this.maxWidth+"px":void 0,maxHeight:this.maxHeight?this.maxHeight+"px":void 0,minWidth:this.maxHeight?this.minWidth+"px":void 0,minHeight:this.minHeight?this.minHeight+"px":void 0,left:"float"===this.mode&&this.left?this.left+"px":void 0,top:"float"===this.mode&&this.top?this.top+"px":void 0,zIndex:"float"===this.mode?""+e.zIndex:void 0,background:this.background,border:this.border,borderRadius:this.borderRadius?this.borderRadius+"px":void 0,webkitBorderRadius:this.borderRadius?this.borderRadius+"px":void 0,boxShadow:this.shadow,webkitBoxShadow:this.shadow}),this.registerEvent(i),t&&t(i),i},c.prototype.updateZIndex=function(){var t=u.default.instance;a.addStyles(this.element,{zIndex:"float"===this.mode?""+t.zIndex:void 0})},c.prototype.destroy=function(){if(this.animatable){var t=this.element;if(!t)return;var e=u.default.instance;a.addClasses(t,e.prefix,"animate-"+this.animate+"-to-out")}else this.dispose()},c.prototype.updateOffset=function(t){var e=this.element;e&&(u.default.instance,a.addStyles(e,{width:t.width?t.width+"px":void 0,height:t.height?t.height+"px":void 0,maxWidth:t.maxWidth?t.maxWidth+"px":void 0,maxHeight:t.maxHeight?t.maxHeight+"px":void 0,minWidth:t.maxHeight?t.minWidth+"px":void 0,minHeight:t.minHeight?t.minHeight+"px":void 0,left:"float"===this.mode&&t.left?t.left+"px":void 0,top:"float"===this.mode&&t.top?t.top+"px":void 0}),t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.maxWidth&&(this.maxWidth=t.maxWidth),t.maxHeight&&(this.maxHeight=t.maxHeight),t.minWidth&&(this.minWidth=t.minWidth),t.minHeight&&(this.minHeight=t.minHeight),t.left&&(this.left=t.left),t.top&&(this.top=t.top))},c.prototype.dispose=function(){var t=u.default.instance;a.removeElement(this.element),delete t.components[this.uniqueId]},c.prototype.registerEvent=function(n){var r=this;if(n){var o=u.default.instance;n.addEventListener("animationstart",function(t){}),n.addEventListener("animationend",function(t){var e="animate-"+r.animate+"-to-in",i="animate-"+r.animate+"-to-out";r.animatable&&(a.hasClass(n,o.prefix,e)&&a.removeClasses(n,o.prefix,e),a.hasClass(n,o.prefix,i)&&(a.removeClasses(n,o.prefix,i),r.dispose()))})}},c.prototype.handlerWidthOrHeight=function(t){var e=null;return"width"===t?(this.minWidth&&this.width&&(e=Math.max(this.minWidth,this.width)),this.maxWidth&&this.width&&(e=Math.min(this.maxWidth,this.width))):"height"===t&&(this.minHeight&&this.height&&(e=Math.max(this.minHeight,this.height)),this.maxHeight&&this.height&&(e=Math.min(this.maxHeight,this.height))),e},c);function c(t){void 0===t&&(t="default");var e=o.call(this)||this;return e.type=t,e._background=!1,e._shadow=!1,e._border=!1,e._animate="none",e._mode="float",e.animatable=!1,e}e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),s=i(1),a=i(3),n=i(0),r=(Object.defineProperty(h.prototype,"uniqueId",{get:function(){var t=n.default.instance.components;return t.hasOwnProperty(this._uniqueId)||(t[this._uniqueId]=this),this._uniqueId},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"element",{get:function(){return document.querySelector("[data-id='"+this.uniqueId+"']")},enumerable:!0,configurable:!0}),h.prototype.addComponent=function(t,e){t=s.stringCast(t),this.components[t]||(this.components[t]=e)},h.prototype.getComponent=function(t,e){if(void 0===e&&(e=this),-1<(t=o.removeInvalidCharacter(s.stringCast(t))).indexOf("/")){var i=t.split("/"),n=e.getComponent(i[0]);if(null===n)return null;for(var r=0;r<i.length;r++){if(!(r+1<i.length))return n;n=n.getComponent(i[r+1],n)}return n}return e.components[t]?e.components[t]:null},h.prototype.removeComponent=function(t){if(-1<(t=o.removeInvalidCharacter(s.stringCast(t))).indexOf("/")){var e=t.lastIndexOf("/"),i=t.substr(0,e),n=this.getComponent(i);n&&n.removeComponent(t.substr(e+1))}else{var r=this.components[t];r&&(a.removeElement(r.element),delete this.components[t])}},h);function h(){this._uniqueId=o.generateUniqueId(),this.components={}}e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),n=i(1);e.generateUniqueId=function(t){void 0===t&&(t=5);for(var e=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i="#",n=0;n<t;n++)i+=e[r.randomNumber(0,e.length)];return i},e.removeInvalidCharacter=function(t){return n.stringCast(t).replace(/[\r\n\t\s]/g,"")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomNumber=function(t,e){var i=Math.random()*(e-t+1)+t;return parseInt(i.toString(),10)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStringAndNotEmptyOrNull=function(t){return t&&"string"==typeof t&&0<t.trim().length}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2);e.isAnimateType=function(t){switch(t){case"zoom":return!0;default:return n.assertNever(t)}},e.isPresentMode=function(t){switch(t){case"embed":case"float":return!0;default:return n.assertNever(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(12),i(13),i(14)},function(t,e,i){},function(t,e,i){},function(t,e,i){}],r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)).default;function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i,n});